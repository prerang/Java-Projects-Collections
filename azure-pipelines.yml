trigger:
- main   # your branch name

pool:
  name: 'Default'

steps:

# 1️⃣ VALIDATE
- task: Maven@3
  displayName: 'Validate Project'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'validate'

# 2️⃣ COMPILE
- task: Maven@3
  displayName: 'Compile Source Code'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'compile'

# 3️⃣ TEST
- task: Maven@3
  displayName: 'Run Unit Tests'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'test'

# 4️⃣ PACKAGE
- task: Maven@3
  displayName: 'Package Artifact (JAR/WAR)'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'package'

# 5️⃣ VERIFY
- task: Maven@3
  displayName: 'Verify Artifact (Integration Tests / Quality Checks)'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'verify'

# 6️⃣ INSTALL
- task: Maven@3
  displayName: 'Install Artifact to Local Repository'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'install'


